grafana:
  service:
    type: LoadBalancer # Easy access for Dev/Minikube
  
  sidecar:
    dashboards:
      enabled: true
      label: grafana_dashboard
      labelValue: "1"
      searchNamespace: ALL

prometheus:
  prometheusSpec:
    # How often to scrape metrics
    scrapeInterval: "15s"
    
    # Resource limits to prevent OOM
    resources:
      requests:
        memory: 400Mi
      limits:
        memory: 1Gi

alertmanager:
  enabled: true

# Custom alerting rules for cost monitoring
prometheus:
  prometheusSpec:
    additionalScrapeConfigs: []
    
additionalPrometheusRulesMap:
  rag-cost-alerts:
    groups:
      - name: CostAlerts
        rules:
          - alert: HighCostSpike
            expr: rate(rag_cost_dollars_total[10m]) > 10
            for: 5m
            labels:
              severity: warning
            annotations:
              summary: "RAG API spending > $1/min detected"
              description: "Cost rate is {{ $value }} dollars per minute"
